{"version":3,"sources":["combobox/combobox.js","modal/modals.js"],"names":["replaceSelectElementsWithCustom","customSelect","i","j","element","customElement","document","getElementsByClassName","length","getElementsByTagName","createElement","setAttribute","innerHTML","options","selectedIndex","appendChild","itemsList","createItems","addEventListener","onComboboxClick","index","item","onItemClick","select","this","parentNode","selectContainer","previousSibling","click","e","stopPropagation","closeAllComboboxesExceptActive","nextSibling","classList","toggle","items","selectedItem","currentItemsList","push","indexOf","add","mainPageContainer","getElementById","openedModal","registerModalOpeners","modalOpeners","openModal","initiator","target","deviceName","getAttribute","parentElement","deviceId","getDeviceId","registerModalClosers","modalClosers"],"mappings":"AAAA,aAGA,IAAAA,gCAAA,WACA,IAAAC,OAAAA,EAAAC,OAAAA,EAAAC,OAAAA,EAAAC,OAAAA,EAAAC,OAAAA,EAEA,IADAJ,EAAAK,SAAAC,uBAAA,uBACAL,EAAA,EAAAA,EAAAD,EAAAO,OAAAN,IAAA,CACAE,EAAAH,EAAAC,GAAAO,qBAAA,UAAA,IACAJ,EAAAC,SAAAI,cAAA,QACAC,aAAA,QAAA,sBACAN,EAAAO,UAAAR,EAAAS,QAAAT,EAAAU,eAAAF,UACAX,EAAAC,GAAAa,YAAAV,GAEA,IAAAW,EAAAV,SAAAI,cAAA,OAEA,IADAM,EAAAL,aAAA,QAAA,oDACAR,EAAA,EAAAA,EAAAC,EAAAI,OAAAL,IACAc,YAAAb,EAAAD,EAAAa,GAGAf,EAAAC,GAAAa,YAAAC,GACAX,EAAAa,iBAAA,QAAAC,mBAIAF,YAAA,SAAAb,EAAAgB,EAAAJ,GACA,IAAAK,EAAAf,SAAAI,cAAA,OACAW,EAAAT,UAAAR,EAAAS,QAAAO,GAAAR,UACAS,EAAAH,iBAAA,QAAAI,aACAN,EAAAD,YAAAM,IAGA,SAAAC,cAIA,IAHA,IAAAC,EAAAC,KAAAC,WAAAA,WAAAhB,qBAAA,UAAA,GACAiB,EAAAF,KAAAC,WAAAE,gBAEAzB,EAAA,EAAAA,EAAAqB,EAAAf,OAAAN,IACA,GAAAqB,EAAAV,QAAAX,GAAAU,WAAAY,KAAAZ,UAAA,CACAW,EAAAT,cAAAZ,EACAwB,EAAAd,UAAAY,KAAAZ,UACA,MAGAc,EAAAE,QAGA,SAAAT,gBAAAU,GACAA,EAAAC,kBACAC,+BAAAP,MACAA,KAAAQ,YAAAC,UAAAC,OAAA,+BAGA,IAAAH,+BAAA,SAAA3B,GAIA,IAHA,IAAA+B,EAAA7B,SAAAC,uBAAA,wBACA6B,EAAA9B,SAAAC,uBAAA,sBACA8B,EAAA,GACAnC,EAAA,EAAAA,EAAAkC,EAAA5B,OAAAN,IACAE,GAAAgC,EAAAlC,IACAmC,EAAAC,KAAApC,GAGA,IAAA,IAAAA,EAAA,EAAAA,EAAAiC,EAAA3B,OAAAN,IACAmC,EAAAE,QAAArC,IACAiC,EAAAjC,GAAA+B,UAAAO,IAAA,gCAKAlC,SAAAY,iBAAA,QAAAa,gCACA/B,kCCpEA,IAAAyC,kBAAAnC,SAAAoC,eAAA,aACAC,iBAAAA,EAEAC,qBAAA,WAEA,IADA,IAAAC,EAAAvC,SAAAC,uBAAA,cACAL,EAAA,EAAAA,EAAA2C,EAAArC,OAAAN,IACA2C,EAAA3C,GAAAgB,iBAAA,QAAA4B,YAIAA,UAAA,SAAAjB,GACA,IAAAkB,EAAAlB,EAAAmB,OACAC,OAAAA,EACA,GAGA,GAFAA,EAAAF,EAAAG,aAAA,YACAH,EAAAA,EAAAI,eACA,cACAF,GAEA,IAAAG,EAAAC,YAAAJ,GACAG,KAEAT,YAAArC,SAAAoC,eAAAU,IACAnB,UAAAC,OAAA,8BACAO,kBAAAR,UAAAC,OAAA,uBAGAmB,YAAA,SAAAJ,GACA,OAAAA,GACA,IAAA,iCACA,MAAA,kBACA,IAAA,8BACA,MAAA,aACA,IAAA,oBACA,MAAA,eACA,QACA,SAIAK,qBAAA,WAEA,IADA,IAAAC,EAAAjD,SAAAC,uBAAA,sBACAL,EAAA,EAAAA,EAAAqD,EAAA/C,OAAAN,IACAqD,EAAArD,GAAAgB,iBAAA,QAAA,WACAyB,YAAAV,UAAAC,OAAA,8BACAO,kBAAAR,UAAAC,OAAA,wBAKAU,uBACAU","file":"scripts.min.js","sourcesContent":["\"use strict\";\r\n// Combobox (Появляется в секции \"Избранные устройства\" в мобильной версии)\r\n\r\nconst replaceSelectElementsWithCustom = () => {\r\n    let customSelect, i, j, element, customElement;\r\n    customSelect = document.getElementsByClassName(\"combobox__container\");\r\n    for (i = 0; i < customSelect.length; i++) {\r\n        element = customSelect[i].getElementsByTagName(\"select\")[0];\r\n        customElement = document.createElement(\"div\");\r\n        customElement.setAttribute(\"class\", \"combobox__selected\");\r\n        customElement.innerHTML = element.options[element.selectedIndex].innerHTML;\r\n        customSelect[i].appendChild(customElement);\r\n\r\n        const itemsList = document.createElement(\"div\");\r\n        itemsList.setAttribute(\"class\", \"combobox__items-list combobox__items-list_hidden\");\r\n        for (j = 0; j < element.length; j++) {\r\n            createItems(element, j, itemsList);\r\n        }\r\n        \r\n        customSelect[i].appendChild(itemsList);\r\n        customElement.addEventListener(\"click\", onComboboxClick);\r\n    }\r\n}\r\n\r\nconst createItems = (element, index, itemsList) => {\r\n    const item = document.createElement(\"div\");\r\n    item.innerHTML = element.options[index].innerHTML;\r\n    item.addEventListener(\"click\", onItemClick);\r\n    itemsList.appendChild(item);\r\n}\r\n\r\nfunction onItemClick () {\r\n    const select = this.parentNode.parentNode.getElementsByTagName(\"select\")[0];\r\n    const selectContainer = this.parentNode.previousSibling;\r\n    \r\n    for (let i = 0; i < select.length; i++) {\r\n        if (select.options[i].innerHTML == this.innerHTML) {\r\n            select.selectedIndex = i;\r\n            selectContainer.innerHTML = this.innerHTML;\r\n            break;\r\n        }\r\n    }\r\n    selectContainer.click();\r\n}\r\n\r\nfunction onComboboxClick(e) {\r\n    e.stopPropagation();\r\n    closeAllComboboxesExceptActive(this);\r\n    this.nextSibling.classList.toggle(\"combobox__items-list_hidden\");\r\n}\r\n\r\nconst closeAllComboboxesExceptActive = (element) => {\r\n    const items = document.getElementsByClassName(\"combobox__items-list\");\r\n    const selectedItem = document.getElementsByClassName(\"combobox__selected\");\r\n    const currentItemsList = [];\r\n    for (let i = 0; i < selectedItem.length; i++) {\r\n        if (element == selectedItem[i]) {\r\n            currentItemsList.push(i)\r\n        }\r\n    }\r\n    for (let i = 0; i < items.length; i++) {\r\n        if (currentItemsList.indexOf(i)) {\r\n            items[i].classList.add(\"combobox__items-list_hidden\");\r\n        }\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\"click\", closeAllComboboxesExceptActive);\r\nreplaceSelectElementsWithCustom();","const mainPageContainer = document.getElementById(\"main-page\");\r\nlet openedModal;\r\n\r\nconst registerModalOpeners = () => {\r\n    const modalOpeners = document.getElementsByClassName(\"open-modal\");\r\n    for (let i = 0; i < modalOpeners.length; i++) {\r\n        modalOpeners[i].addEventListener(\"click\", openModal)\r\n    }\r\n}\r\n\r\nconst openModal = (e) => {\r\n    let initiator = e.target;\r\n    let deviceName;\r\n    do {\r\n        deviceName = initiator.getAttribute('device');\r\n        initiator = initiator.parentElement\r\n        if (!initiator) return;\r\n    } while (!deviceName);\r\n\r\n    const deviceId = getDeviceId(deviceName);\r\n    if (!deviceId) return;\r\n\r\n    openedModal = document.getElementById(deviceId);\r\n    openedModal.classList.toggle(\"modal-form__layout_visible\");\r\n    mainPageContainer.classList.toggle(\"main-page_blurred\");\r\n}\r\n\r\nconst getDeviceId = (deviceName) => {\r\n    switch (deviceName) {\r\n        case 'Xiaomi Yeelight LED Smart Bulb':\r\n            return 'xiaomi-yeelight';\r\n        case 'Elgato Eve Degree Connected':\r\n            return 'elgato-eve';\r\n        case 'Xiaomi Warm Floor':\r\n            return 'xiaomi-floor';\r\n        default:\r\n            return;\r\n    }\r\n}\r\n\r\nconst registerModalClosers = () => {\r\n    const modalClosers = document.getElementsByClassName(\"modal-form__button\");\r\n    for (let i = 0; i < modalClosers.length; i++) {\r\n        modalClosers[i].addEventListener(\"click\", function() {\r\n            openedModal.classList.toggle(\"modal-form__layout_visible\");\r\n            mainPageContainer.classList.toggle(\"main-page_blurred\");\r\n        })\r\n    }\r\n}\r\n\r\nregisterModalOpeners();\r\nregisterModalClosers();"]}